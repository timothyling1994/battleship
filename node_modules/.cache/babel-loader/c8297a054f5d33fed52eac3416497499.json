{"ast":null,"code":"var _jsxFileName = \"/Users/timothyling/Desktop/OdinProject/battleship/battleship/src/components/GamePage.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState } from \"react\";\nimport gameController from \"../gameController.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction GamePage(props) {\n  _s();\n\n  const GRID_DIMENSION = 10;\n  const messageOptions = [\"awaiting coordinates...\", \"firing shot...it's a miss!\", \"firing shot...it's a hit!\", \"you just sank an enemy ship!\"];\n  const [msg, setMsg] = useState(messageOptions[0]);\n  let playerOneGrid = [];\n  let playerTwoGrid = [];\n  let currentGameController;\n  let playerOneBoard = props.storeShipLocs;\n  const playerOneBoardFlattened = playerOneBoard.flat(2).sort(function (a, b) {\n    return a - b;\n  });\n  let tempEnemyBoard = [[0], [1, 2], [3, 4, 5], [10, 11, 12, 13], [14, 15, 16, 17, 18]];\n\n  const initGameController = () => {\n    currentGameController = gameController();\n    currentGameController.gameInit(props.storeShipLocs, tempEnemyBoard);\n  };\n\n  const initGameBoards = () => {\n    for (let i = 0; i < GRID_DIMENSION * GRID_DIMENSION; i++) {\n      playerTwoGrid.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-element\",\n        onClick: attack,\n        onMouseEnter: highlight,\n        onMouseLeave: removeHighlight,\n        id: \"enemy-\" + i\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 23\n      }, this));\n\n      if (playerOneBoardFlattened.includes(i)) {\n        playerOneGrid.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-element highlight\",\n          id: i\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 24\n        }, this));\n      } else {\n        playerOneGrid.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid-element\",\n          id: i\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 24\n        }, this));\n      }\n    }\n  };\n\n  const attack = target => {\n    if (!target.target.classList.contains(\"clicked\")) {\n      target.target.classList.add(\"clicked\");\n      let index = target.target.id.indexOf(\"-\");\n      let gridNum = target.target.id.substring(index + 1);\n      let result = currentGameController.turnController(parseInt(gridNum));\n\n      if (result.hitShip) {\n        setMsg(messageOptions[2]);\n      } else {\n        setMsg(messageOptions[1]);\n      }\n\n      setTimeout(function () {\n        markBoard(target.target.id, result.hitShip);\n        getComputersAttack();\n      }, 2000);\n      setMsg(messageOptions[0]);\n    }\n  };\n\n  const getComputersAttack = () => {\n    let computerResult = currentGameController.getComputersMove();\n    let result = currentGameController.turnController(computerResult);\n    let selectedDiv = document.getElementById(computerResult);\n    selectedDiv.classList.add(\"clicked\");\n    markBoard(computerResult, result.hitShip);\n  };\n\n  const highlight = target => {\n    let target_num = target.target.id;\n    let divToHighlight = document.getElementById(target_num);\n\n    if (!divToHighlight.classList.contains(\"clicked\")) {\n      divToHighlight.classList.add(\"highlight\");\n    }\n  };\n\n  const removeHighlight = target => {\n    let target_num = target.target.id;\n    let divToRemoveHighlight = document.getElementById(target_num);\n\n    if (!divToRemoveHighlight.classList.contains(\"clicked\")) {\n      divToRemoveHighlight.classList.remove(\"highlight\");\n    }\n  };\n\n  const markBoard = (gridId, result) => {\n    let divToMark = document.getElementById(gridId);\n\n    if (result) {\n      divToMark.style.backgroundColor = \"red\";\n    } else {\n      divToMark.style.backgroundColor = \"black\";\n    }\n  };\n\n  initGameController();\n  initGameBoards();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-status\",\n      children: [props.name, \", \", msg]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gameboards-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-gameboard\",\n        children: playerOneGrid.map(gridelement => gridelement)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-gameboard\",\n        children: playerTwoGrid.map(gridelement => gridelement)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 3\n  }, this);\n}\n\n_s(GamePage, \"L01Vsqdvm8gvt+pGa+Rnlr1R9nk=\");\n\n_c = GamePage;\nexport default GamePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"GamePage\");","map":{"version":3,"sources":["/Users/timothyling/Desktop/OdinProject/battleship/battleship/src/components/GamePage.js"],"names":["React","useState","gameController","GamePage","props","GRID_DIMENSION","messageOptions","msg","setMsg","playerOneGrid","playerTwoGrid","currentGameController","playerOneBoard","storeShipLocs","playerOneBoardFlattened","flat","sort","a","b","tempEnemyBoard","initGameController","gameInit","initGameBoards","i","push","attack","highlight","removeHighlight","includes","target","classList","contains","add","index","id","indexOf","gridNum","substring","result","turnController","parseInt","hitShip","setTimeout","markBoard","getComputersAttack","computerResult","getComputersMove","selectedDiv","document","getElementById","target_num","divToHighlight","divToRemoveHighlight","remove","gridId","divToMark","style","backgroundColor","name","map","gridelement"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {useState} from \"react\";\nimport gameController from \"../gameController.js\";\n\nfunction GamePage(props){\n\n\tconst GRID_DIMENSION = 10;\n\tconst messageOptions = [\"awaiting coordinates...\",\"firing shot...it's a miss!\",\"firing shot...it's a hit!\",\"you just sank an enemy ship!\"]\n\tconst [msg,setMsg] = useState(messageOptions[0]);\n\n\tlet playerOneGrid = [];\n\tlet playerTwoGrid = [];\n\tlet currentGameController;\n\tlet playerOneBoard = props.storeShipLocs;\n\tconst playerOneBoardFlattened = playerOneBoard.flat(2).sort(function (a,b){\n\t\treturn a-b;\n\t});\n\tlet tempEnemyBoard = [[0],[1,2],[3,4,5],[10,11,12,13],[14,15,16,17,18]];\n\n\tconst initGameController = () => {\n\t\tcurrentGameController = gameController();\n\t\tcurrentGameController.gameInit(props.storeShipLocs,tempEnemyBoard);\n\t};\n\n\tconst initGameBoards = () =>{\n\t\n\t\tfor(let i = 0;i <GRID_DIMENSION*GRID_DIMENSION;i++)\n\t\t{\n\t\t\tplayerTwoGrid.push(<div className=\"grid-element\" onClick={attack} onMouseEnter={highlight} onMouseLeave={removeHighlight} id={\"enemy-\"+i}></div>);\n\t\n\t\t\tif(playerOneBoardFlattened.includes(i))\n\t\t\t{\n\t\t\t\tplayerOneGrid.push(<div className=\"grid-element highlight\" id={i}></div>);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tplayerOneGrid.push(<div className=\"grid-element\" id={i}></div>);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst attack = (target) => { \n\t\n\t\tif(!target.target.classList.contains(\"clicked\"))\n\t\t{\n\t\t\ttarget.target.classList.add(\"clicked\");\n\t\t\tlet index = target.target.id.indexOf(\"-\");\n\t\t\tlet gridNum = target.target.id.substring(index+1);\n\t\t\tlet result = currentGameController.turnController(parseInt(gridNum));\n\n\t\t\tif(result.hitShip)\n\t\t\t{\n\t\t\t\tsetMsg(messageOptions[2]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsetMsg(messageOptions[1]);\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tmarkBoard(target.target.id,result.hitShip);\n\t\t\t\tgetComputersAttack();\n\t\t\t},2000);\n\n\n\t\t\tsetMsg(messageOptions[0]);\n\t\t}\n\n\t};\n\n\tconst getComputersAttack = () => {\n\t\tlet computerResult = currentGameController.getComputersMove();\n\t\tlet result = currentGameController.turnController(computerResult);\n\t\tlet selectedDiv = document.getElementById(computerResult);\n\t\tselectedDiv.classList.add(\"clicked\");\n\t\tmarkBoard(computerResult,result.hitShip);\n\t};\n\n\tconst highlight = (target) => {\n\n\t\tlet target_num = target.target.id;\n\t\tlet divToHighlight = document.getElementById(target_num);\n\t\tif(!divToHighlight.classList.contains(\"clicked\"))\n\t\t{\n\t\t\tdivToHighlight.classList.add(\"highlight\");\n\t\t}\n\t};\n\n\tconst removeHighlight = (target) => {\n\t\tlet target_num = target.target.id;\n\t\tlet divToRemoveHighlight = document.getElementById(target_num);\n\t\tif(!divToRemoveHighlight.classList.contains(\"clicked\"))\n\t\t{\n\t\t\tdivToRemoveHighlight.classList.remove(\"highlight\");\n\t\t}\n\t};\t\n\n\tconst markBoard = (gridId, result) => {\n\t\tlet divToMark = document.getElementById(gridId);\n\t\t\n\t\tif(result)\n\t\t{\n\t\t\tdivToMark.style.backgroundColor=\"red\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdivToMark.style.backgroundColor=\"black\";\n\t\t}\n\t};\n\n\tinitGameController();\n\tinitGameBoards();\t\n\t\n\treturn(\n\t\t<div className=\"game-page\">\n\t\t\t<div className=\"game-status\">{props.name}, {msg}</div>\n\t\t\t<div className=\"gameboards-container\">\n\t\t\t\t<div className=\"main-gameboard\">\n\t\t\t\t\t{playerOneGrid.map((gridelement)=>gridelement)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"main-gameboard\">\n\t\t\t\t\t{playerTwoGrid.map((gridelement)=>gridelement)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default GamePage;"]},"metadata":{},"sourceType":"module"}